<!DOCTYPE html>
<html>
<head>
  <title>LIFEgame 2017 Bay Area</title>

  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!--Import materialize.css-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
  <!-- Add the jQuery library -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>

  <div class="navbar-fixed">
    <nav>
      <div class="nav-wrapper">
        <a href="#!" class="brand-logo left">LIFEgame&trade;</a>
        <ul class="right">
          <li><a href="https://lifegame-lordsgrace.github.io/"><i class="material-icons">home</i></a></li>
          <li><a href="https://lifegame-lordsgrace.github.io/register">Register</a></li>
        </ul>
      </div>
    </nav>
  </div>

  <div class="container">

    <div class="row">
      <div class="row valign-wrapper blue">
        <div class="col s2">
          <i class="material-icons medium">insert_photo</i>
        </div>
        <div class="col s10">
          <h4>Upload Photo</h4>
        </div>
      </div>

      <form class="col s12">
        <div class="row">
          <div class="input-field col s6">
            <input id="first_name" type="text" class="validate">
            <label style="font-size:24px;" for="first_name">First Name</label>
          </div>
          <div class="input-field col s6">
            <input id="last_name" type="text" class="validate">
            <label style="font-size:24px;" for="last_name">Last Name</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <input id="email" type="email" class="validate">
            <label style="font-size:24px;" for="email">Email</label>
          </div>
        </div>
        <div class="file-field input-field">
          <div class="btn blue">
            <span>File</span>
            <input id="file" type="file">
          </div>
          <div class="file-path-wrapper">
            <input class="file-path validate" type="text">
          </div>
        </div>
        <button class="btn waves-effect waves-light blue" type="submit" name="action" onclick="submitForm(); return false;">
          Submit
          <i class="material-icons right">send</i>
        </button>

        <!-- Show Progress -->
        <p><div id="progress" class="flow-text"></div></p>
      </form>
    </div>

    <script>
    var file,
    reader = new FileReader();

    // Upload the file to Google Drive
    reader.onloadend = function (e) {
      full_name = $('input#first_name').val() + $('input#last_name').val()
      email = $('input#email').val()
      google.script.run
      .withSuccessHandler(showMessage("File " + file.name + " successfully uploaded. Thank you!"))
      .uploadFileToGoogleDrive(
        e.target.result, file.name,
        full_name,
        email
      );
    };

    function submitForm() {
      file = $('#file')[0].files[0];
      showMessage("Uploading file " + file.name + " ...");
      reader.readAsDataURL(file);
    }

    function showMessage(e) {
      $('#progress').html(e);
    }
    </script>
  </div>

  <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Finding Your Purposes In Life</h5>
          <p class="grey-text text-lighten-4">We are a group of coworkers and volunteers working together to bring LIFEgame&trade; to Northern California.</p>
          <p class="grey-text text-lighten-4">Lord's Grace Christian Church welcomes spiritual and financial support and collaboration from other partners.</p>
        </div>
        <div class="col l4 offset-l2 s12">
          <h5 class="white-text">Links</h5>
          <ul>
            <li><a class="grey-text text-lighten-3" href="mailto:lifegame.lordsgrace@gmail.com"><i class="material-icons">email</i></a> <a class="grey-text text-lighten-3" href="tel:+16506230917"><i class="material-icons">phone</i></a> <a class="grey-text text-lighten-3" href="https://goo.gl/maps/fv2nxVsDLN42"><i class="material-icons">place</i></a></li>
            <li><a class="grey-text text-lighten-3" href="http://www.lordsgrace.org/">Lord's Grace Christian Church</a></li>
            <li><a class="grey-text text-lighten-4" href="http://lifeimpactministries.com">Life IMPACT ministries</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container right" >
        LIFEgame&trade; is a registered trade mark of <a class="grey-text text-lighten-4" href="http://lifeimpactministries.com">Life IMPACT ministries</a>.
      </div>
    </div>
  </footer>
</body>
</html>
